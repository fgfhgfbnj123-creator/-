
### 1. Налаштування IP-адреси сервера Windows Server 2008

**1.1. Відкрити вікно налаштування адаптера**

1. Натискаю кнопку **Start** (Пуск) у лівому нижньому куті.
2. Обираю **Control Panel** (Панель керування).
3. У Панелі керування відкриваю **Network and Sharing Center**
   (Центр керування мережами і спільним доступом).
4. У лівій частині вікна натискаю **Manage network connections**
   (Керування мережевими підключеннями).

**Навіщо:**
Тут знаходиться список усіх мережевих адаптерів, через які сервер підключений до мережі.

---

**1.2. Вибір потрібного мережевого адаптера**

1. У вікні «Network Connections» знаходжу адаптер типу
   **Local Area Connection** (або назву, яка відповідає моєму віртуальному адаптеру).
2. Натискаю по ньому **правою кнопкою миші**.
3. У контекстному меню обираю **Properties** (Властивості).

**Навіщо:**
Через властивості адаптера можна змінити IP-адресу, маску, шлюз та DNS.

---

**1.3. Перехід до налаштувань IPv4**

1. У списку компонентів знаходжу **Internet Protocol Version 4 (TCP/IPv4)**.
2. Виділяю його **лівим кліком**.
3. Натискаю кнопку **Properties** (Властивості) внизу.

**Навіщо:**
Саме в налаштуваннях IPv4 задається статична IP-адреса і параметри мережі для сервера.

---

**1.4. Задання статичної IP-адреси**

У вікні властивостей IPv4 виконую:

1. Перемикаюся з «Obtain an IP address automatically»
   на **Use the following IP address** (Використовувати наступну IP-адресу).

2. Заповнюю поля:

   * **IP address:** `192.168.10.10`
   * **Subnet mask:** після переходу в це поле значення `255.255.255.0` може підставитися автоматично,
     якщо ні – вводжу вручну.
   * **Default gateway:** `192.168.10.1` (можна лишити порожнім, якщо шлюз не використовується).

3. Нижче, в блоці DNS, ставлю перемикач на **Use the following DNS server addresses**.

4. У полі **Preferred DNS server** вводжу `192.168.10.10`.

5. Поле **Alternate DNS server** залишаю порожнім.

6. Натискаю **OK** у цьому вікні.

7. Ще раз натискаю **Close / OK** вікно властивостей адаптера.

**Навіщо:**

* Статична IP-адреса `192.168.10.10` потрібна, щоб сервер завжди був доступний за одним і тим самим адресом.
* Маска `255.255.255.0` означає, що всі пристрої з адресами `192.168.10.x` знаходяться в одній підмережі.
* Шлюз `192.168.10.1` потрібен для виходу в інші мережі/Інтернет (може бути роутер або залишитись порожнім у лабораторії).
* DNS `192.168.10.10` вказує, що сервер сам буде виконувати роль DNS-сервера для домену.

---

**1.5. Перевірка правильності налаштування IP**

1. Відкриваю **Start → Run**.
2. Вводжу `cmd` і натискаю **Enter**, відкривається командний рядок.
3. Вводжу команду:

```cmd
ipconfig /all
```

4. У виводі перевіряю, що для мого адаптера вказано:

   * IPv4 Address: `192.168.10.10`
   * Subnet Mask: `255.255.255.0`
   * Default Gateway: `192.168.10.1`
   * DNS Servers: `192.168.10.10`

**Навіщо:**
Команда `ipconfig /all` показує всі мережеві параметри. Так ми переконуємося, що статичні значення застосувались правильно.
Продовжую «Хід виконання роботи» в тому ж стилі.

---

### 2. Перейменування сервера (необов’язково, але правильно)

**2.1. Відкриваю властивості системи**

1. Натискаю **Start** → **Computer** (або значок «Комп’ютер» на робочому столі).
2. Клацаю по **Computer** правою кнопкою → обираю **Properties**.

**Навіщо:**
Через це вікно можна змінити ім’я комп’ютера і членство в домені/робочій групі.

---

**2.2. Змінюю ім’я комп’ютера**

1. У правій частині вікна «System» знаходжу розділ **Computer name, domain, and workgroup settings**.
2. Натискаю посилання **Change settings**.
3. Відкривається вікно «System Properties», вкладка **Computer Name**.
4. Натискаю кнопку **Change…**.
5. У полі **Computer name** вводжу, наприклад, `SRV-DC`.
6. Натискаю **OK**.
7. З’являється вікно з пропозицією перезавантажити комп’ютер — погоджуюсь і натискаю **Restart Now**.

**Навіщо:**
Ім’я контролера домену краще задати до підняття AD, щоб потім не ламати залежності в домені.

---

### 3. Встановлення ролей Active Directory Domain Services (AD DS) і DNS

**3.1. Відкриваю Server Manager**

1. Натискаю **Start** → **Administrative Tools** → **Server Manager**
   (або значок **Server Manager** може з’являтись автоматично після входу).

---

**3.2. Додаю роль AD DS**

1. У лівій панелі Server Manager натискаю **Roles**.
2. Справа натискаю **Add Roles**.
3. У вікні «Before You Begin» натискаю **Next**.
4. У списку ролей ставлю галочку біля **Active Directory Domain Services**.
5. Натискаю **Next**, ще раз **Next**, читаю короткий опис і натискаю **Install**.
6. Чекаю завершення інсталяції, натискаю **Close**.

**Навіщо:**
Це встановлює сервіс AD DS, але контролером домену сервер ще не став — потрібен `dcpromo`.

---

**3.3. Перевіряю, чи встановився DNS**

Якщо майстер пропонує одразу додати **DNS Server**, погоджуюсь. Якщо ні — додаю окремо:

1. Знову **Add Roles**.
2. Ставлю галочку на **DNS Server** → **Next → Install**.

**Навіщо:**
AD потребує DNS для реєстрації записів домену й контролера; коректна робота домену майже завжди вимагає власного DNS-сервера.

---

### 4. Підняття контролера домену за допомогою dcpromo

**4.1. Запуск майстра dcpromo**

1. Натискаю **Start → Run**.
2. У полі **Open** вводжу:

```cmd
dcpromo
```

3. Натискаю **OK**.

**Навіщо:**
`dcpromo` перетворює сервер з встановленою роллю AD DS на повноцінний контролер домену.

---

**4.2. Параметри нового домену**

1. У вікні майстра іноді з’являється попередження щодо сумісності — натискаю **Next**.

2. Якщо є галочка **Use advanced mode installation** – можна не чіпати, натискаю **Next**.

3. На сторінці **Choosing Deployment Configuration** обираю:

   * **Create a new domain in a new forest**

   і натискаю **Next**.

4. На сторінці **Name the Forest Root Domain** уводжу ім’я домену, наприклад:

   ```
   s24.local
   ```

5. Натискаю **Next**. Майстер перевіряє ім’я.

**Навіщо:**
Створюємо новий одно-доменний ліс з кореневим доменом `s24.local`.

---

**4.3. Рівні функціональності та DNS**

1. На сторінках **Forest Functional Level** і **Domain Functional Level** обираю, наприклад, `Windows Server 2003` або `Windows Server 2008` → **Next**.
2. На сторінці **Additional Domain Controller Options** залишаю активною опцію **DNS server** (галочка стоїть) → **Next**.
3. Якщо з’являється попередження про делегування DNS — натискаю **Yes** (ігноруємо, тому що в лабораторії немає зовнішнього DNS).

**Навіщо:**

* Рівні функціональності визначають, які функції AD доступні.
* Встановлення DNS одночасно з контролером забезпечує внутрішній DNS для домену.

---

**4.4. Розміщення бази AD та SYSVOL, пароль DSRM**

1. На сторінках **Locations for Database, Log Files, and SYSVOL** залишаю шляхи за замовчуванням:

   * `C:\Windows\NTDS`
   * `C:\Windows\SYSVOL`
     → натискаю **Next**.

2. На сторінці **Directory Services Restore Mode Administrator Password** задаю пароль для режиму відновлення, наприклад `P@ssw0rd!`, повторюю його → **Next**.

3. Перевіряю підсумок налаштувань → натискаю **Next**.

4. Чекаю завершення процесу до 100%, ставлю галочку **Reboot on completion** (якщо є) та натискаю **Finish**.

5. Сервер автоматично перезавантажується.

**Навіщо:**

* Каталоги NTDS і SYSVOL – це місце бази AD і реплікації групових політик.
* Пароль DSRM потрібен для аварійного завантаження в режимі відновлення AD.

---

**4.5. Перевірка після перезавантаження**

1. Входжу під **Administrator**.
2. Відкриваю **cmd** і ввожу:

```cmd
ipconfig /all
```

Переконуюсь, що:

* DNS Servers: `192.168.10.10`
* З’явилися нові записи `Connection-specific DNS suffix: s24.local`.

3. Перевіряю DNS:

```cmd
nslookup s24.local
```

Очікую, що ім’я `s24.local` буде відповідати IP `192.168.10.10`.

**Навіщо:**
Це підтверджує, що контролер домену та DNS працюють і доменне ім’я резолвиться.

---

### 5. Встановлення та налаштування DHCP на контролері домену

**5.1. Додавання ролі DHCP Server**

1. Відкриваю **Server Manager**.
2. У лівій панелі обираю **Roles** → справа **Add Roles**.
3. У списку вибираю **DHCP Server** → **Next**.
4. На сторінці з вибором мережевого інтерфейсу ставлю галочку на тому адаптері, де IP `192.168.10.10` → **Next**.
5. На сторінці **Parent Domain** перевіряю:

   * Parent Domain: `s24.local`
   * Preferred DNS server: `192.168.10.10`
     → **Next**.

**Навіщо:**
Тут ми вказуємо, що DHCP-сервер працює всередині домену `s24.local` і видаватиме клієнтам правильний DNS.

---

**5.2. Створення області (Scope)**

1. На сторінці **Add or Edit DHCP Scopes** натискаю **Add…**.
2. У вікні «Add Scope» задаю:

   * **Scope Name:** `MainScope`
   * **Starting IP address:** `192.168.10.100`
   * **Ending IP address:** `192.168.10.150`
   * **Subnet mask:** `255.255.255.0`
   * **Default gateway:** `192.168.10.1`
3. За потреби можна додати **Lease duration** за замовчуванням → **OK**.
4. Повертаюсь до майстра — видно створену область → **Next**.

**Навіщо:**
Область визначає діапазон IP, які DHCP буде видавати клієнтам, а також параметри шлюзу й DNS.

---

**5.3. Авторизація DHCP-сервера в Active Directory**

1. На сторінці **Authorize DHCP server** обираю пункт
   **Use current credentials** (якщо я ввійшов під доменним адміном) або вводжу облікові дані.
2. Натискаю **Next → Install**.
3. Після завершення натискаю **Close**.

**Навіщо:**
Авторизація в AD не дозволяє «лівим» DHCP-серверам роздавати IP в домені.

---

**5.4. Перевірка DHCP у консолі**

1. Натискаю **Start → Administrative Tools → DHCP**.
2. У лівому дереві бачу свій сервер `SRV-DC.s24.local`.
3. Розкриваю його → **IPv4 → MainScope** і перевіряю, що область активна (зелена іконка).

**Навіщо:**
Переконуємось, що служба запущена і область готова видавати адреси.

---

### 6. Створення доменного користувача User666

**6.1. Відкриваю консоль Active Directory Users and Computers**

1. Натискаю **Start → Administrative Tools → Active Directory Users and Computers**.

---

**6.2. Створюю користувача**

1. У лівому дереві розкриваю домен `s24.local`.
2. Обираю контейнер **Users** (або власну OU, якщо ти її створиш).
3. Правий клік по **Users** → **New → User**.
4. Заповнюю поля:

   * First name: `User`
   * Last name: `666`
   * User logon name: `User666`
5. Натискаю **Next**.
6. Вводжу пароль, наприклад: `P@ssw0rd666`.
7. Знімаю галочку **User must change password at next logon** (якщо по завданню це не потрібно) і ставлю при потребі **Password never expires** → **Next → Finish**.

**Навіщо:**
Ми створюємо доменний обліковий запис, під яким потім будемо заходити з клієнта Windows 7.

---

### 7. Налаштування клієнта Windows 7: отримання IP з DHCP

**7.1. Переконуюся, що клієнт в одній мережі з сервером**

У віртуалці (VirtualBox/VMware) задаю для клієнта той самий тип мережі, що й для сервера (наприклад, один і той самий Host-Only/VMnet).

---

**7.2. Включаю автоматичне отримання IP**

1. На клієнті Windows 7 натискаю **Start → Control Panel**.
2. Обираю **Network and Sharing Center**.
3. Зліва натискаю **Change adapter settings**.
4. Правий клік по **Local Area Connection** → **Properties**.
5. Обираю **Internet Protocol Version 4 (TCP/IPv4)** → **Properties**.
6. Ставлю:

   * **Obtain an IP address automatically**.
   * **Obtain DNS server address automatically**.
7. Натискаю **OK**, потім **Close**.

---

**7.3. Оновлюю адресу та перевіряю**

1. Відкриваю **cmd** на клієнті.
2. Ввожу:

```cmd
ipconfig /release
ipconfig /renew
ipconfig /all
```

3. Перевіряю, що:

   * IPv4 Address: в діапазоні `192.168.10.100–150`.
   * DHCP Enabled: Yes.
   * DHCP Server: `192.168.10.10`.
   * DNS Server: `192.168.10.10`.

**Навіщо:**
Це підтверджує, що IP-адресу та параметри мережі клієнт отримав саме від DHCP на контролері домену.

---

### 8. Приєднання клієнта Windows 7 до домену

**8.1. Відкриваю системні властивості**

1. Правий клік по **Computer** → **Properties**.
2. Справа натискаю **Change settings**.
3. На вкладці **Computer Name** натискаю **Change…**.

---

**8.2. Додаю комп’ютер до домену**

1. У секції **Member of** переключаюсь з **Workgroup** на **Domain**.

2. У полі Domain вводжу:
   ```
   s24.local
   ```
3. Натискаю **OK**.

4. Коли з’являється вікно для введення облікових даних, вводжу дані доменного адміністратора:

   * User name: `S24\Administrator`
   * Password: пароль адміністратора домену.

5. Якщо все добре — з’являється повідомлення, що комп’ютер успішно приєднаний до домену `s24.local`.

6. Натискаю **OK**, потім погоджуюсь на **Restart Now**.

**Навіщо:**
Після приєднання Windows 7 стає доменною станцією, яка використовує AD для автентифікації користувачів.

---

### 9. Вхід на клієнті під користувачем User666

**9.1. Вибір облікового запису домену**

1. Після перезавантаження клієнта на екрані входу натискаю **Switch User** (якщо потрібно) → **Other User**.

2. У полі **User name** вводжу:

   ```
   S24\User666
   ```

   або повне UPN-ім’я:

   ```
   User666@s24.local
   ```

3. У полі **Password** вводжу пароль, який задавався на сервері для `User666`.

4. Натискаю **Enter**.

Якщо логін успішний — завантажується профіль користувача `User666`.

---

**9.2. Перевірка, що ми справді в домені**

1. Відкриваю **cmd** від імені користувача `User666`.
2. Ввожу команду:

```cmd
whoami
```

Очікуваний результат:
```text
s24\user666
```

**Навіщо:**
Команда `whoami` показує домен\користувача, під яким виконуються команди. Це підтверджує, що автентифікація відбулася через контролер домену `s24.local`.


